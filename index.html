<!doctype html>
<html lang="en">
<head>
  <meta name="theme-color" content="#ffffff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Date Decider — Tomorrow</title>
  <style>
    :root{
      --bg1:#f6f7ff;
      --bg2:#fff6fb;
      --card: rgba(255,255,255,.72);
      --card2: rgba(255,255,255,.82);
      --text: rgba(20,22,30,.92);
      --muted:  rgba(20,22,30,.62);
      --line: rgba(20,22,30,.12);
      --shadow: 0 18px 50px rgba(20,22,30,.12);
      --r: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      overflow-x:hidden;
      background:
        radial-gradient(1200px 700px at 20% 15%, rgba(120,180,255,.30), transparent 60%),
        radial-gradient(900px 600px at 80% 20%, rgba(255,150,210,.28), transparent 55%),
        radial-gradient(900px 700px at 40% 90%, rgba(140,255,210,.22), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
    }

    /* subtle animated grain */
    .grain{
      pointer-events:none;
      position:fixed; inset:0;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="180" height="180"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".9" numOctaves="3" stitchTiles="stitch"/></filter><rect width="180" height="180" filter="url(%23n)" opacity=".35"/></svg>');
      mix-blend-mode: overlay;
      opacity:.035;
      animation: float 10s ease-in-out infinite alternate;
    }
    @keyframes float{ from{transform:translate3d(0,0,0)} to{transform:translate3d(12px,-8px,0)} }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 28px 20px 80px;
      position:relative;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px;
      padding: 10px 0 18px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      user-select:none;
    }
    .logo{
      width:42px; height:42px; border-radius:14px;
      background: linear-gradient(135deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
      border:1px solid var(--line);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      display:grid; place-items:center;
      position:relative;
      overflow:hidden;
    }
    .logo:before{
      content:"";
      position:absolute; inset:-40%;
      background: conic-gradient(from 180deg, rgba(255,255,255,.0), rgba(255,255,255,.25), rgba(255,255,255,.0));
      animation: spin 3.2s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg) } }
    .logo span{
      position:relative;
      font-weight:700;
      letter-spacing:.5px;
      opacity:.95;
    }
    .title{
      display:flex; flex-direction:column; line-height:1.12;
    }
    .title strong{font-size:14px; letter-spacing:.2px}
    .title small{font-size:12px; color:var(--muted)}
    .chip{
      padding:10px 12px;
      border:1px solid var(--line);
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      color:var(--muted);
      font-size:12px;
      display:flex; align-items:center; gap:8px;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background: rgba(120,255,190,.9);
      box-shadow: 0 0 20px rgba(120,255,190,.6);
    }

    .card{
      background: linear-gradient(180deg, var(--card), rgba(255,255,255,.05));
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding: 22px;
      backdrop-filter: blur(12px);
    }

    .hero{
      display:grid;
      grid-template-columns: 1.3fr .9fr;
      gap:16px;
      align-items:stretch;
      margin-top: 8px;
    }
    @media (max-width: 860px){
      .hero{grid-template-columns:1fr}
    }

    .h1{
      font-size: 34px;
      line-height: 1.05;
      margin: 6px 0 10px;
      letter-spacing:-.5px;
    }
    .sub{
      color: var(--muted);
      font-size: 14px;
      line-height: 1.6;
      margin: 0 0 18px;
      max-width: 56ch;
    }

    .btnRow{display:flex; gap:10px; flex-wrap:wrap}
    button{
      cursor:pointer;
      border:1px solid var(--line);
      background: rgba(255,255,255,.08);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 650;
      letter-spacing:.2px;
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
      user-select:none;
    }
    button:hover{ transform: translateY(-1px); background: rgba(255,255,255,.11) }
    button:active{ transform: translateY(1px) }
    .primary{
      background: linear-gradient(135deg, rgba(120,255,190,.20), rgba(120,180,255,.18));
      border-color: rgba(255,255,255,.18);
    }

    .side{
      display:flex; flex-direction:column; gap:12px;
      height:100%;
    }
    .mini{
      background: linear-gradient(180deg, var(--card2), rgba(255,255,255,.05));
      border:1px solid var(--line);
      border-radius: var(--r);
      padding:16px;
      display:flex; flex-direction:column; gap:10px;
      min-height: 150px;
    }
    .mini h3{
      margin:0;
      font-size: 13px;
      letter-spacing:.25px;
      color: rgba(255,255,255,.86);
      text-transform: uppercase;
    }
    .mini p{
      margin:0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
    }
    .divider{
      height:1px; background: var(--line);
      margin: 14px 0;
    }

    /* scenes */
    .scene{
      margin-top: 18px;
      display:none;
      opacity:0;
      transform: translateY(10px);
      transition: opacity .35s ease, transform .35s ease;
    }
    .scene.active{
      display:block;
    }
    .scene.show{
      opacity:1;
      transform: translateY(0);
    }

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 860px){
      .grid2{grid-template-columns:1fr}
    }

    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color: var(--muted);
      font-size:12px;
    }

    .resultBox{
      position:relative;
      overflow:hidden;
      padding: 18px;
      border-radius: var(--r);
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      min-height: 160px;
    }
    .resultTitle{
      display:flex; justify-content:space-between; gap:12px; align-items:flex-start;
      margin-bottom: 6px;
    }
    .choice{
      font-size: 22px;
      font-weight: 800;
      letter-spacing:-.2px;
      margin: 2px 0 4px;
    }
    .tag{
      font-size: 12px;
      color: rgba(255,255,255,.80);
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.16);
      padding: 7px 10px;
      border-radius: 999px;
      white-space:nowrap;
    }

    .timeline{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top: 12px;
    }
    .slot{
      display:flex; gap:12px;
      padding: 10px 12px;
      border-radius: 16px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
    }
    .time{
      min-width: 92px;
      font-weight: 750;
      color: rgba(255,255,255,.85);
      font-size: 12px;
      letter-spacing:.2px;
    }
    .act{
      color: var(--muted);
      font-size: 13px;
      line-height: 1.55;
    }

    footer{
      margin-top: 26px;
      color: rgba(255,255,255,.60);
      font-size: 12px;
      text-align:center;
    }

    /* confetti canvas */
    canvas#confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index: 20;
    }
  </style>
</head>

<body>
  <div class="grain"></div>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"><span>♥</span></div>
        <div class="title">
          <strong>Date Decider</strong>
          <small>Modern little ritual for two</small>
        </div>
      </div>
      <div class="chip"><span class="dot"></span><span id="todayText">Ready for tomorrow</span></div>
    </header>

    <section class="hero">
      <div class="card">
        <div class="pill">✨ A tiny story-based picker • 2 options • Saturday-ready</div>
        <h1 class="h1">Let tomorrow decide itself.</h1>
        <p class="sub">
          We’ll do this properly: a soft opening, a clean transition, and a satisfying ending.
          One click to pick the vibe — then we follow a full-day plan that still lets us sleep in until <b>9–10am</b>.
        </p>

        <div class="btnRow">
          <button class="primary" id="startBtn">Start the ritual</button>
          <button id="skipBtn">Skip to the picker</button>
          <button id="resetBtn" title="Clear saved result">Reset</button>
        </div>

        <div class="divider"></div>

        <p class="sub" style="margin:0">
          <span style="opacity:.9;font-weight:650">MVP options for tomorrow:</span>
          <span style="color:var(--muted)">Out date</span> vs <span style="color:var(--muted)">Stay-home date</span>.
          Random, fair, and a bit cinematic.
        </p>
      </div>

      <div class="side">
        <div class="mini">
          <h3>Automation</h3>
          <p>• Remembers your last choice (so you can reopen and smile).</p>
          <p>• Reroll button when you want destiny to “try again”.</p>
          <p>• Gentle confetti when a choice lands.</p>
        </div>
        <div class="mini">
          <h3>Saturday rule</h3>
          <p><b>Sleep in until 9–10am</b> is non-negotiable. The plan starts slow, then ramps up.</p>
          <p>It’s balanced: cozy + romance + a little momentum.</p>
        </div>
      </div>
    </section>

    <!-- Scene 1: Opening -->
    <section class="scene active show" id="sceneOpening">
      <div class="card">
        <h2 style="margin:0 0 8px; font-size:18px; letter-spacing:-.2px;">Opening</h2>
        <p class="sub" style="margin-bottom:0;max-width: 75ch;">
          Tonight we’re not overthinking. We’re doing a small, elegant experiment:
          two paths, one coin-flip moment, and a whole day shaped around it.
          Tomorrow morning, we wake up gently — and we let the vibe pick us.
        </p>
      </div>
    </section>

    <!-- Scene 2: Transition -->
    <section class="scene" id="sceneTransition">
      <div class="card">
        <h2 style="margin:0 0 8px; font-size:18px; letter-spacing:-.2px;">Transition</h2>
        <p class="sub" style="margin:0;max-width: 75ch;">
          Take a breath. Imagine: sunlight, slow stretching, no alarms yelling.
          When you’re ready, press <b>Decide</b> — and we’ll commit.
        </p>
        <div class="btnRow" style="margin-top:14px">
          <button class="primary" id="decideBtn">Decide</button>
          <button id="backBtn">Back</button>
        </div>
      </div>
    </section>

    <!-- Scene 3: Body (result) -->
    <section class="scene" id="sceneResult">
      <div class="card">
        <div class="grid2">
          <div class="resultBox">
            <div class="resultTitle">
              <div>
                <div style="font-size:12px;color:var(--muted);letter-spacing:.25px;text-transform:uppercase;">Tomorrow’s vibe</div>
                <div class="choice" id="choiceText">—</div>
                <div style="color:var(--muted);font-size:13px;line-height:1.6" id="choiceDesc">
                  Click decide to get a plan.
                </div>
              </div>
              <div class="tag" id="choiceTag">MVP</div>
            </div>

            <div class="btnRow" style="margin-top:10px">
              <button class="primary" id="rerollBtn">Reroll</button>
              <button id="lockBtn" title="Lock choice and go to ending">Lock it</button>
            </div>
          </div>

          <div class="resultBox">
            <div style="font-size:12px;color:var(--muted);letter-spacing:.25px;text-transform:uppercase;">Full Saturday plan</div>
            <div style="margin-top:8px; color: rgba(255,255,255,.84); font-weight:750; letter-spacing:-.15px;">
              Sleep-in edition (start slow, end sweet)
            </div>
            <div class="timeline" id="timeline">
              <!-- injected -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Scene 4: Ending -->
    <section class="scene" id="sceneEnding">
      <div class="card">
        <h2 style="margin:0 0 8px; font-size:18px; letter-spacing:-.2px;">Ending</h2>
        <p class="sub" style="max-width: 80ch;">
          Tomorrow isn’t about being “productive”. It’s about being <b>present</b>.
          We picked a vibe, we followed a plan, and we left room for spontaneous little moments.
        </p>
        <div class="pill" id="endingPill">Saved. See you tomorrow.</div>
        <div class="btnRow" style="margin-top:14px">
          <button class="primary" id="againBtn">Do it again</button>
          <button id="copyBtn">Copy plan text</button>
        </div>
      </div>
    </section>

    <footer>
      Built with love + a tiny bit of randomness. You can extend this with more options later.
    </footer>
  </div>

  <script>
    // ====== Helpers ======
    const $ = (id) => document.getElementById(id);
    const scenes = ["sceneOpening","sceneTransition","sceneResult","sceneEnding"];

    function showScene(target){
      scenes.forEach(s => {
        const el = $(s);
        if(!el) return;
        el.classList.remove("active","show");
        if(s === target){
          el.classList.add("active");
          requestAnimationFrame(()=> el.classList.add("show"));
        }
      });
      window.scrollTo({top: 0, behavior: "smooth"});
    }

    function formatToday(){
      const d = new Date();
      const opts = { weekday:"long", year:"numeric", month:"short", day:"numeric" };
      return d.toLocaleDateString(undefined, opts);
    }

    $("todayText").textContent = "Today is " + formatToday();

    // ====== MVP Options ======
    const OPTIONS = [
      {
        key: "out",
        name: "Out date",
        tag: "Go outside",
        desc: "We get dressed nicely, step out, and let the city be our background music.",
        timeline: [
          ["9:30–10:15", "Sleep in. Gentle wake-up, no rushing. Water + cuddles."],
          ["10:15–11:15", "Brunch mission: pick one cozy place (or order something you both love)."],
          ["11:15–12:30", "Slow walk: bookstore / café / park. Photos are optional, vibes are mandatory."],
          ["12:30–14:00", "A small ‘main event’: museum, cinema, or a new neighborhood you’ve never explored."],
          ["14:00–16:00", "Recharge: ice cream + sit somewhere pretty. Talk about nothing, then everything."],
          ["16:00–18:30", "Nap / downtime at home. Shower, music, and reset."],
          ["19:00–21:00", "Dinner date: one signature dish each (or one shared set). No phones, just us."],
          ["21:00–late", "Night walk or dessert stop. End with a ‘one good thing’ recap in bed."]
        ]
      },
      {
        key: "home",
        name: "Stay-home date",
        tag: "Cozy mode",
        desc: "We turn the house into a tiny universe: comfort, laughs, and slow affection.",
        timeline: [
          ["9:30–10:30", "Sleep in. Wake up like cats. Curtains half-open, soft light."],
          ["10:30–11:30", "Brunch at home: eggs/toast/noodles/anything. One cooks, one DJs."],
          ["11:30–13:00", "Cozy block: board game / co-op game / puzzle / ‘read next to each other’ time."],
          ["13:00–14:30", "Mini movie: one episode or one film (shortlist 3, random pick 1)."],
          ["14:30–16:30", "Nap + snack + slow kisses. The house stays quiet."],
          ["16:30–18:30", "Home spa: shower, skincare, haircare — take your time."],
          ["19:00–21:00", "Cook together: simple but special. Plate it nicely like a restaurant."],
          ["21:00–late", "Dessert + journaling prompt: ‘what did I love today?’ Then fall asleep close."]
        ]
      }
    ];

    function randomPick(){
      const i = Math.floor(Math.random() * OPTIONS.length);
      return OPTIONS[i];
    }

    function setPlan(opt){
      $("choiceText").textContent = opt.name;
      $("choiceTag").textContent = opt.tag;
      $("choiceDesc").textContent = opt.desc;

      // timeline
      const tl = $("timeline");
      tl.innerHTML = "";
      opt.timeline.forEach(([t, a])=>{
        const row = document.createElement("div");
        row.className = "slot";
        row.innerHTML = `<div class="time">${t}</div><div class="act">${a}</div>`;
        tl.appendChild(row);
      });

      // ending pill
      $("endingPill").textContent = `Locked in: ${opt.name}. Tomorrow, we follow the vibe.`;
    }

    function saveChoice(opt){
      localStorage.setItem("dateDecider:lastChoice", JSON.stringify({
        key: opt.key,
        savedAt: new Date().toISOString()
      }));
    }

    function loadChoice(){
      try{
        const raw = localStorage.getItem("dateDecider:lastChoice");
        if(!raw) return null;
        const { key } = JSON.parse(raw);
        return OPTIONS.find(o => o.key === key) || null;
      }catch(e){
        return null;
      }
    }

    // ====== Confetti (lightweight) ======
    const canvas = $("confetti");
    const ctx = canvas.getContext("2d");
    let confetti = [];
    let confettiOn = false;

    function resize(){
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    function launchConfetti(){
      confetti = [];
      const count = 120;
      for(let i=0;i<count;i++){
        confetti.push({
          x: Math.random()*canvas.width,
          y: -20 - Math.random()*canvas.height*0.2,
          r: 2 + Math.random()*4,
          vx: -1.2 + Math.random()*2.4,
          vy: 2.2 + Math.random()*4.2,
          a: Math.random()*Math.PI*2,
          va: -0.2 + Math.random()*0.4,
          life: 70 + Math.random()*50
        });
      }
      confettiOn = true;
      requestAnimationFrame(tickConfetti);
      setTimeout(()=> confettiOn = false, 1400);
    }
    const confettiPalette = [
      "rgba(120,180,255,.85)",   // blue
      "rgba(255,150,210,.85)",   // pink
      "rgba(140,255,210,.85)",   // mint
      "rgba(255,210,120,.85)"    // warm yellow
];

    function tickConfetti(){
      if(!confettiOn && confetti.length===0) return;
      ctx.clearRect(0,0,canvas.width,canvas.height);

      confetti = confetti.filter(p => p.life-- > 0);
      for(const p of confetti){
        p.x += p.vx;
        p.y += p.vy;
        p.a += p.va;
        p.vy += 0.03; // gravity

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.a);
        ctx.globalAlpha = Math.max(0, Math.min(1, p.life/120));
        // no explicit colors requested; use a neutral bright blend
        ctx.fillStyle = "rgba(255,255,255,.85)";
        ctx.fillRect(-p.r, -p.r/2, p.r*2.2, p.r);
        ctx.restore();
      }
      if(confettiOn || confetti.length>0) requestAnimationFrame(tickConfetti);
    }

    // ====== Wiring ======
    let current = loadChoice();

    // If previously saved, preload (but still allow ritual)
    if(current){
      setPlan(current);
    }else{
      setPlan(OPTIONS[0]); // placeholder so UI isn't empty
      $("choiceText").textContent = "Undecided";
      $("choiceDesc").textContent = "Press Decide to let randomness pick the vibe.";
      $("choiceTag").textContent = "MVP";
      $("timeline").innerHTML = "";
    }

    $("startBtn").addEventListener("click", ()=> showScene("sceneTransition"));
    $("skipBtn").addEventListener("click", ()=> showScene("sceneResult"));

    $("backBtn").addEventListener("click", ()=> showScene("sceneOpening"));

    function doDecide(){
      current = randomPick();
      setPlan(current);
      saveChoice(current);
      launchConfetti();
      showScene("sceneResult");
    }

    $("decideBtn").addEventListener("click", doDecide);
    $("rerollBtn").addEventListener("click", ()=>{
      current = randomPick();
      setPlan(current);
      saveChoice(current);
      launchConfetti();
    });

    $("lockBtn").addEventListener("click", ()=>{
      if(!current) current = randomPick();
      saveChoice(current);
      showScene("sceneEnding");
    });

    $("againBtn").addEventListener("click", ()=>{
      // restart flow but keep last choice saved
      showScene("sceneTransition");
    });

    $("resetBtn").addEventListener("click", ()=>{
      localStorage.removeItem("dateDecider:lastChoice");
      current = null;
      $("choiceText").textContent = "Undecided";
      $("choiceDesc").textContent = "Press Decide to let randomness pick the vibe.";
      $("choiceTag").textContent = "MVP";
      $("timeline").innerHTML = "";
      showScene("sceneOpening");
    });

    $("copyBtn").addEventListener("click", async ()=>{
      // Copy choice + timeline text
      const choice = $("choiceText").textContent;
      const rows = [...document.querySelectorAll("#timeline .slot")].map(el=>{
        const t = el.querySelector(".time")?.textContent || "";
        const a = el.querySelector(".act")?.textContent || "";
        return `${t} — ${a}`;
      });
      const text = `Tomorrow's vibe: ${choice}\n\nSaturday plan:\n` + rows.join("\n");
      try{
        await navigator.clipboard.writeText(text);
        $("endingPill").textContent = "Copied. Now we just show up and enjoy.";
      }catch(e){
        $("endingPill").textContent = "Copy blocked by browser. Select text manually if needed.";
      }
    });

    // Nice default: if there was a saved choice, drop user into result quickly
    // without being pushy — only after a short delay.
    setTimeout(()=>{
      const saved = loadChoice();
      if(saved){
        current = saved;
        setPlan(current);
      }
    }, 200);

  </script>
</body>
</html>
